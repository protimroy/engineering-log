<!DOCTYPE html>
<html >
  <head>
    <title>Dagster</title>
    <link rel="stylesheet" lang="text/css" href="/bulma.css">
    <!-- include another bulma.css stylesheet that is for the user to customize -->
    <link rel="stylesheet" lang="text/css" href="/bulma-custom.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>a[href^="https://"]::after {
        content: " [*]";
      }
      .navbar-menu {
        box-shadow: none;
      }</style>
  </head>
  <body>
    <section class="section">
      <div class="container">
        <nav class="navbar mb-4" role="navigation">
          <div class="navbar-menu is-active">
            <div class="navbar-start">
              <a href="/" class="navbar-item">Back home</a>
            </div>
            <div class="navbar-end">

            </div>
          </div>
        </nav>
      </div>
      <div class="container" id="content">
        <h1 class="title">
          <span class="icon-text"><svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z" />
  <path d="M10 2c1 .5 2 2 2 5" />
</svg>

            <span>Dagster</span></span>
        </h1>
        <div class="field is-grouped is-grouped-multiline">
<div class="control">
<div class="tags has-addons">
<span class="tag is-white">slug</span>
<span class="tag is-light">/dagster</span>
</div>
</div>

<div class="control">
<div class="tags has-addons">
<span class="tag is-white">title</span>
<span class="tag is-light">Dagster</span>
</div>
</div>
</div>
        
        <p class="subtitle" style="font-size:95%;" >Deploying Dagster on Ubuntu with Python 3.12.9, Systemd, and Tailscale</p>
        <section class="content" style="font-size:75%;" >
          <h6>
In this guide, Iâ€™ll walk you through how I deployed <a href="https://dagster.io/">Dagster</a>, a powerful data orchestration platform, on an Ubuntu server using:</h6>
<ul>
<li>
Python 3.12.9 (via source build)</li><li>
Virtual environments</li><li>
systemd for managing services</li><li>
Tailscale for secure remote access</li></ul>
<p>
By the end, you'll have a production-ready Dagster instance that you can access from anywhere securely.</p><h6>
Pre-requisites</h6>
<ul>
<li>
Ubuntu 22.04+ (I used 24.04)</li><li>
<a href="https://tailscale.com">Tailscale</a> account (for secure remote access)</li><li>
Basic familiarity with Linux, systemd, and Python virtual environments</li></ul>
<h6>
Install Python 3.12.9 from source</h6>
<pre><code>sudo apt update
sudo apt install -y build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev \
  libssl-dev libreadline-dev libffi-dev libsqlite3-dev wget curl libbz2-dev

cd /tmp
wget https://www.python.org/ftp/python/3.12.9/Python-3.12.9.tgz
tar -xf Python-3.12.9.tgz
cd Python-3.12.9
./configure --enable-optimizations
make -j$(nproc)
sudo make altinstall
</code></pre><h6>
Create a virtual environment</h6>
<pre><code>python3.12 -m venv ~/venv312
source ~/venv312/bin/activate
mkdir ~/Documents/dagster_workspace
</code></pre><h6>
Install Dagster, example project, and dependencies</h6>
<pre><code>pip install dagster dagster-webserver dagster-daemon

dagster project from-example --example getting_started_etl_tutorial --name example_etl

pip install -e ~/Documents/dagster_workspace/example_etl
</code></pre><h6>
Set Up DAGSTER_HOME</h6>
<pre><code>mkdir -p ~/.dagster
vim ~/.dagster/dagster.yaml
</code></pre><pre><code>local_artifact_storage:
  module: dagster._core.storage.root
  class: LocalArtifactStorage
  config:
    base_dir: /home/protim/.dagster

run_storage:
  module: dagster._core.storage.runs
  class: SqliteRunStorage
  config:
    base_dir: /home/protim/.dagster

event_log_storage:
  module: dagster._core.storage.event_log
  class: SqliteEventLogStorage
  config:
    base_dir: /home/protim/.dagster

schedule_storage:
  module: dagster._core.storage.schedules
  class: SqliteScheduleStorage
  config:
    base_dir: /home/protim/.dagster

run_launcher:
  module: dagster._core.launcher.default_run_launcher
  class: DefaultRunLauncher
</code></pre><p>
Then add this to your <code>~/.bashrc</code>:</p><pre><code>export DAGSTER_HOME=/home/protim/.dagster
source ~/.bashrc
</code></pre><h6>
Configure systemd services</h6>
<pre><code>sudo vim /etc/systemd/system/dagster-daemon.service
</code></pre><pre><code>[Unit]
Description=Dagster Webserver
After=network.target

[Service]
Type=simple
User=protim
WorkingDirectory=/home/protim/Documents/dagster_workspace
ExecStart=/home/protim/venv312/bin/dagster-webserver
Restart=always
RestartSec=10
Environment=PATH=/home/protim/venv312/bin:/usr/bin:/bin
Environment=PYTHONUNBUFFERED=1
Environment=DAGSTER_HOME=/home/protim/.dagster

[Install]
WantedBy=multi-user.target
</code></pre><pre><code>sudo vim /etc/systemd/system/dagster-daemon.service
</code></pre><pre><code>
[Unit]
Description=Dagster Daemon
After=network.target

[Service]
Type=simple
User=protim
WorkingDirectory=/home/protim/Documents/dagster_workspace
ExecStart=/home/protim/venv312/bin/dagster-daemon run
Restart=always
RestartSec=10
EnvironmentFile=/etc/dagster-daemon.env
Environment=PATH=/home/protim/venv312/bin:/usr/bin:/bin
Environment=PYTHONUNBUFFERED=1

[Install]
WantedBy=multi-user.target
</code></pre><pre><code>sudo vim /etc/dagster-daemon.env
</code></pre><pre><code>DAGSTER_HOME=/home/protim/.dagster
</code></pre><p>
Then reload systemd and enable both services:</p><pre><code>sudo systemctl daemon-reexec
sudo systemctl daemon-reload
sudo systemctl enable dagster-webserver dagster-daemon
sudo systemctl start dagster-webserver dagster-daemon
</code></pre><h6>
Create your Dagster workspace</h6>
<pre><code>sudo vim ~/Documents/dagster_workspace/workspace.yaml
</code></pre><pre><code>load_from:
  - python_package:
      package_name: quickstart_etl
      working_directory: example_etl
      location_name: quickstart_etl
</code></pre><p>
Modify the <code>__init__.py</code> file</p><pre><code>sudo vim ~/Documents/dagster_workspace/example_etl/__init__.py
</code></pre><pre><code>from .definitions import defs
</code></pre><p>
This allows Dagster to find the <code>Definitions</code> object when loading the package.</p><h6>
Enable secure remote access via Tailscale</h6>
<pre><code>curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up
</code></pre><p>
Then open the Dagster UI from your browser:</p><pre><code>http://&lt;tailscale-ip&gt;:3000
</code></pre><h6>
Conclusion</h6>
<p>
You've now deployed Dagster with:</p><ul>
<li>
A clean Python 3.12.9 venv</li><li>
Fully-managed daemon and webserver</li><li>
Secure remote access via Tailscale</li><li>
A functioning example ETL pipeline with schedules and assets</li></ul>
<p>
This setup is a great starting point for building and deploying your data pipelines. You can now extend this to include more complex workflows, integrate with other data sources, and scale as needed.<br>Dagster sensors and schedules can be added to trigger jobs based on external events or time intervals, making it a powerful tool for data orchestration.<br>When pipelines goes down, sensors should be able to detect the failure and trigger alerts or retries. This can be done using Dagster's built-in alerting mechanisms without the need of using external tools like Grafana.<br>Dagster can also monitor databases, data lakes, and other data sources to ensure data quality and integrity. This is crucial for maintaining the reliability of your data pipelines.</p><p>
Author: <a href="https://www.protimroy.com">Protim Roy</a> with help from some LLM <br>Date: 2025-04-08</p><pre><code>Tags: dagster, python, data engineering, data orchestration, ubuntu, systemd, tailscale
</code></pre>
        </section>
      </div>
    </section>
  </body>
</html>